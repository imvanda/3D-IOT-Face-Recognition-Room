# 3Dæ™ºèƒ½è™šæ‹Ÿæˆ¿é—´

<div align="center">

**é«˜ä»¿çœŸ3Dæ™ºèƒ½å®¶å±…ç¯å¢ƒ**

æ”¯æŒç¬¬ä¸€äººç§°æ¼«æ¸¸ Â· IoTè®¾å¤‡æ§åˆ¶ Â· AIè¯­éŸ³æŒ‡ä»¤ Â· äººè„¸è¯†åˆ«è®¤è¯

[![React](https://img.shields.io/badge/React-19.2.3-61DAFB?style=flat&logo=react)](https://react.dev/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.8.2-3178C6?style=flat&logo=typescript)](https://www.typescriptlang.org/)
[![Three.js](https://img.shields.io/badge/Three.js-0.182.0-000000?style=flat&logo=three.js)](https://threejs.org/)
[![Node-RED](https://img.shields.io/badge/Node--RED-Latest-8F0000?style=flat&logo=node-red)](https://nodered.org/)
[![ThingsBoard](https://img.shields.io/badge/ThingsBoard-3.x-008080?style=flat)](https://thingsboard.io/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

</div>

---

## ğŸ“– é¡¹ç›®ç®€ä»‹
<img width="2560" height="1305" alt="image" src="https://github.com/user-attachments/assets/b22438af-b6ad-4732-a701-6d6a64872a27" />

https://github.com/user-attachments/assets/be351ff0-1be1-4f0e-b167-ae2e0bbe0ae9





3Dæ™ºèƒ½è™šæ‹Ÿæˆ¿é—´æ˜¯ä¸€ä¸ªåŸºäºWebçš„æ™ºèƒ½å®¶å±…ç‰©è”ç½‘ç®¡ç†ç³»ç»Ÿï¼Œé‡‡ç”¨ç¬¬ä¸€äººç§°è§†è§’3Dæ¼«æ¸¸æŠ€æœ¯ï¼Œç»“åˆAIè¯­éŸ³æ§åˆ¶å’Œç”Ÿç‰©è¯†åˆ«æŠ€æœ¯ï¼Œæä¾›æ²‰æµ¸å¼çš„æ™ºèƒ½å®¶å±…ä½“éªŒã€‚

### æ ¸å¿ƒç‰¹æ€§

- ğŸ  **3Dæ²‰æµ¸å¼æ¼«æ¸¸** - ç¬¬ä¸€äººç§°è§†è§’ï¼ŒWASDç§»åŠ¨ + é¼ æ ‡è½¬å‘
- ğŸ›ï¸ **14ç§IoTè®¾å¤‡** - æ™ºèƒ½ç¯å…‰ã€ç©ºè°ƒã€çª—å¸˜ã€æŠ•å½±ä»ªç­‰è®¾å¤‡æ§åˆ¶
- ğŸ¤– **AIè¯­éŸ³æ§åˆ¶** - åŸºäºGoogle Geminiçš„è‡ªç„¶è¯­è¨€æŒ‡ä»¤è§£æ
- ğŸ‘¤ **äººè„¸è¯†åˆ«è®¤è¯** - DeepFaceå®ç°çš„å®‰å…¨ç”¨æˆ·èº«ä»½éªŒè¯
- ğŸ–ï¸ **æ‰‹åŠ¿è¯†åˆ«æ§åˆ¶** - MediaPipeå®ç°çš„ç›´è§‚æ‰‹åŠ¿æ“ä½œ
- ğŸ“¡ **MQTTå®æ—¶é€šä¿¡** - è®¾å¤‡çŠ¶æ€å®æ—¶åŒæ­¥
- ğŸ¨ **ä¸ªæ€§åŒ–è£…ä¿®** - è‡ªå®šä¹‰åœ°æ¿ã€å¢™é¢ã€æŠ•å½±ç”»é¢è´´å›¾
- ğŸ‘€ **è§†çº¿äº¤äº’** - èšç„¦è™šæ‹Ÿæ‘„åƒå¤´è§¦å‘ç‰©ç†æ‘„åƒå¤´è¿æ¥

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         å‰ç«¯å±‚ (React)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  3Dæ¸²æŸ“å¼•æ“   â”‚  â”‚   UIç»„ä»¶     â”‚  â”‚  çŠ¶æ€ç®¡ç†    â”‚          â”‚
â”‚  â”‚ Three.js     â”‚  â”‚ Interface    â”‚  â”‚ Zustand      â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“ â†“ â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        é€šä¿¡å±‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  MQTT Broker â”‚  â”‚   REST API   â”‚  â”‚  WebSocket   â”‚          â”‚
â”‚  â”‚  Mosquitto   â”‚  â”‚  Node-RED    â”‚  â”‚  (å¯é€‰)      â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“ â†“ â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        åç«¯å±‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  IoTå¹³å°     â”‚  â”‚  AIæœåŠ¡      â”‚  â”‚  ç”Ÿç‰©è¯†åˆ«    â”‚          â”‚
â”‚  â”‚ ThingsBoard  â”‚  â”‚ Gemini AI    â”‚  â”‚ DeepFace/    â”‚          â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚ MediaPipe    â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯æŠ€æœ¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **React** | 19.2.3 | UIæ¡†æ¶ |
| **TypeScript** | 5.8.2 | ç±»å‹å®‰å…¨å¼€å‘ |
| **Vite** | 6.2.0 | ç°ä»£åŒ–æ„å»ºå·¥å…· |
| **Three.js** | 0.182.0 | 3Då›¾å½¢æ¸²æŸ“å¼•æ“ |
| **@react-three/fiber** | 9.4.2 | Reactçš„Three.jså°è£… |
| **@react-three/drei** | 10.7.7 | 3Dè¾…åŠ©ç»„ä»¶åº“ |
| **Zustand** | 5.0.9 | è½»é‡çº§çŠ¶æ€ç®¡ç† |
| **mqtt** | 5.14.1 | MQTTé€šä¿¡å®¢æˆ·ç«¯ |
| **lucide-react** | 0.562.0 | å›¾æ ‡åº“ |
| **axios** | 1.13.2 | HTTPè¯·æ±‚åº“ |
| **@google/genai** | 1.34.0 | Google Gemini AI SDK |

### åç«¯æŠ€æœ¯

| æœåŠ¡ | ç«¯å£ | ç”¨é€” |
|------|------|------|
| **Node-RED** | 1880 | å¯è§†åŒ–æµç¨‹ç¼–æ’ + REST API |
| **ThingsBoard** | 8080 | ä¼ä¸šçº§IoTå¹³å° |
| **Mosquitto MQTT** | 1884/9001 | æ¶ˆæ¯é˜Ÿåˆ— (TCP/WebSocket) |
| **Python Backend** | 5000 | äººè„¸è¯†åˆ« + æ‰‹åŠ¿è¯†åˆ« |

### AI & æœºå™¨å­¦ä¹ 

| æŠ€æœ¯ | ç”¨é€” |
|------|------|
| **Google Gemini AI** | è‡ªç„¶è¯­è¨€è§£ææ™ºèƒ½å®¶å±…æŒ‡ä»¤ |
| **DeepFace** | äººè„¸æ£€æµ‹ã€ç‰¹å¾æå–ã€ç”¨æˆ·éªŒè¯ |
| **MediaPipe** | æ‰‹åŠ¿è¯†åˆ« (21æ‰‹éƒ¨å…³é”®ç‚¹) |

---

## ğŸ“¦ IoTè®¾å¤‡æ¸…å•

| è®¾å¤‡ç±»å‹ | æ•°é‡ | æ§åˆ¶å‚æ•° | ä½ç½® |
|----------|------|----------|------|
| æ™ºèƒ½å¸é¡¶ç¯ | 1 | äº®åº¦ (0-100%) | æˆ¿é—´ä¸­å¤®é¡¶éƒ¨ |
| ç©ºè°ƒ | 1 | æ¸©åº¦ (16-30Â°C) | å·¦å¢™ |
| æ™ºèƒ½çª—å¸˜ | 1 | å¼€åˆç¨‹åº¦ (0-100%) | å³å¢™ |
| å‡é™æ¡Œ | 1 | é«˜åº¦ (70-120cm) | æˆ¿é—´ä¸­å¤® |
| æŠ•å½±ä»ª | 1 | å¼€å…³çŠ¶æ€ | å‰å¢™é¡¶éƒ¨ |
| ç©ºæ°”å‡€åŒ–å™¨ | 1 | å¼€å…³ + æ¨¡å¼ | å·¦å‰è§’ |
| åŠ æ¹¿å™¨ | 1 | å¼€å…³çŠ¶æ€ | å·¦åè§’ |
| æ‰«åœ°æœºå™¨äºº | 1 | å¼€å…³ + è·¯å¾„æ¨¡æ‹Ÿ | éšæœºç§»åŠ¨ |
| æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨ | 1 | ç¯å¢ƒç›‘æµ‹ | å·¦å¢™ä¸­éƒ¨ |
| æ‘„åƒå¤´ | 4 | å¼€å…³ + å®æ—¶ç”»é¢ | å››è§’ |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js >= 18.0.0
- Docker & Docker Compose
- Git

### å®‰è£…æ­¥éª¤

#### 1. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd 3dRoomV2
```

#### 2. å¯åŠ¨DockeræœåŠ¡

```bash
# å¯åŠ¨æ‰€æœ‰åç«¯æœåŠ¡ (Node-RED, ThingsBoard, Mosquitto)
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps
```

#### 3. å®‰è£…å‰ç«¯ä¾èµ–

```bash
npm install
```

#### 4. é…ç½®ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
# Google Gemini API Key (ä» https://aistudio.google.com/app/apikey è·å–)
GEMINI_API_KEY=your_api_key_here

# MQTTé…ç½®
MQTT_BROKER_URL=ws://localhost:9001/mqtt
MQTT_USERNAME=
MQTT_PASSWORD=

# Node-RED APIåœ°å€
NODE_RED_API_URL=http://localhost:1880
```

#### 5. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

è®¿é—®: [http://localhost:3000](http://localhost:3000)

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
3dRoomV2/
â”œâ”€â”€ components/              # Reactç»„ä»¶
â”‚   â”œâ”€â”€ Room.tsx            # 3Dæˆ¿é—´åœºæ™¯æ¸²æŸ“
â”‚   â”œâ”€â”€ Interface.tsx       # UIç•Œé¢ (è®¾å¤‡åˆ—è¡¨ã€èŠå¤©ã€è£…ä¿®)
â”‚   â”œâ”€â”€ Controls.tsx        # ç¬¬ä¸€äººç§°ç›¸æœºæ§åˆ¶
â”‚   â””â”€â”€ AuthOverlay.tsx     # ç”¨æˆ·è®¤è¯è¦†ç›–å±‚
â”œâ”€â”€ services/               # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ api.ts             # REST APIè°ƒç”¨å°è£…
â”‚   â”œâ”€â”€ mqtt.ts            # MQTTå®¢æˆ·ç«¯æœåŠ¡
â”‚   â””â”€â”€ geminiService.ts   # AIè¯­éŸ³æŒ‡ä»¤è§£æ
â”œâ”€â”€ docker-compose.yml     # DockeræœåŠ¡ç¼–æ’
â”œâ”€â”€ mosquitto/             # MQTT Brokeré…ç½®
â”‚   â””â”€â”€ config/
â”‚       â””â”€â”€ mosquitto.conf # MQTTé…ç½®æ–‡ä»¶
â”œâ”€â”€ mysql/                 # æ•°æ®åº“è„šæœ¬ (é¢„ç•™)
â”‚   â””â”€â”€ init.sql
â”œâ”€â”€ nodered-data/          # Node-REDæµç¨‹æ•°æ®
â”‚   â”œâ”€â”€ flows.json         # Node-REDæµç¨‹å®šä¹‰
â”‚   â””â”€â”€ ...
â”œâ”€â”€ App.tsx                # åº”ç”¨å…¥å£
â”œâ”€â”€ index.tsx              # React DOMæŒ‚è½½
â”œâ”€â”€ store.ts               # Zustandå…¨å±€çŠ¶æ€
â”œâ”€â”€ types.ts               # TypeScriptç±»å‹å®šä¹‰
â”œâ”€â”€ package.json           # é¡¹ç›®ä¾èµ–
â”œâ”€â”€ tsconfig.json          # TypeScripté…ç½®
â”œâ”€â”€ vite.config.ts         # Viteæ„å»ºé…ç½®
â”œâ”€â”€ metadata.json          # é¡¹ç›®å…ƒæ•°æ®
â””â”€â”€ README.md              # é¡¹ç›®æ–‡æ¡£
```

---

## ğŸ¯ åŠŸèƒ½ä½¿ç”¨æŒ‡å—

### 3Dæ¼«æ¸¸æ§åˆ¶

- **W/A/S/D** - å‰åå·¦å³ç§»åŠ¨
- **é¼ æ ‡ç§»åŠ¨** - è½¬å‘
- **ESC** - é€€å‡ºé”å®šæ¨¡å¼

### IoTè®¾å¤‡æ§åˆ¶

1. ç‚¹å‡»è®¾å¤‡é¢æ¿ä¸­çš„å¼€å…³æŒ‰é’®æ§åˆ¶è®¾å¤‡å¯åœ
2. æ»‘åŠ¨æ»‘å—è°ƒèŠ‚è®¾å¤‡å‚æ•° (äº®åº¦ã€æ¸©åº¦ç­‰)
3. ä½¿ç”¨AIè¯­éŸ³æŒ‡ä»¤æ‰¹é‡æ§åˆ¶è®¾å¤‡

### AIè¯­éŸ³æ§åˆ¶

ç‚¹å‡»éº¦å…‹é£å›¾æ ‡ï¼Œè¯´å‡ºè‡ªç„¶è¯­è¨€æŒ‡ä»¤ï¼š

- "æ‰“å¼€ç¯å…‰"
- "æŠŠç©ºè°ƒè°ƒåˆ°24åº¦"
- "æ‰“å¼€æ‰€æœ‰è®¾å¤‡"
- "å…³é—­çª—å¸˜å’ŒæŠ•å½±ä»ª"

ç³»ç»Ÿä¼šè‡ªåŠ¨è§£ææŒ‡ä»¤å¹¶æ‰¹é‡æ›´æ–°è®¾å¤‡çŠ¶æ€ã€‚

### äººè„¸è¯†åˆ«è®¤è¯

1. é¦–æ¬¡ä½¿ç”¨æ—¶ç‚¹å‡»"æ³¨å†Œç”¨æˆ·"
2. å…è®¸æ‘„åƒå¤´æƒé™
3. è¾“å…¥ç”¨æˆ·åå¹¶æ‹ç…§æ³¨å†Œ
4. ä¹‹åå¯é€šè¿‡äººè„¸è¯†åˆ«å¿«é€Ÿç™»å½•

### æ‰‹åŠ¿è¯†åˆ« (å¼€å‘ä¸­)

- ğŸ–ï¸ **å¼ å¼€æ‰‹æŒ** - æ‰“å¼€ç¯å…‰
- âœŠ **æ¡æ‹³** - å…³é—­ç¯å…‰
- ğŸ‘† **é£ŸæŒ‡æŒ‡å‘** - é€‰æ‹©è®¾å¤‡
- âœŒï¸ **èƒœåˆ©æ‰‹åŠ¿** - åˆ‡æ¢çª—å¸˜
- ğŸ‘ **ç‚¹èµ** - ç¡®è®¤æ“ä½œ

### ä¸ªæ€§åŒ–è£…ä¿®

1. ç‚¹å‡»"è£…ä¿®æ¨¡å¼"æŒ‰é’®
2. é€‰æ‹©è¦è‡ªå®šä¹‰çš„åŒºåŸŸ (åœ°æ¿ã€å¢™é¢ã€æ¡Œé¢ã€æŠ•å½±ç”»é¢)
3. ä¸Šä¼ è‡ªå®šä¹‰å›¾ç‰‡ä½œä¸ºçº¹ç†è´´å›¾

---

## ğŸ”Œ APIæ–‡æ¡£

### è®¾å¤‡ç®¡ç†

#### è·å–è®¾å¤‡åˆ—è¡¨

```http
GET http://localhost:1880/api/v1/devices
```

å“åº”:
```json
{
  "devices": [
    {
      "id": "light-main",
      "name": "æ™ºèƒ½å¸é¡¶ç¯",
      "type": "LIGHT",
      "status": true,
      "value": 80,
      "position": [0, 2.9, 0]
    }
  ]
}
```

#### åˆ‡æ¢è®¾å¤‡çŠ¶æ€

```http
POST http://localhost:1880/api/v1/devices/{id}/toggle
Content-Type: application/json

{
  "status": true
}
```

#### æ›´æ–°è®¾å¤‡å‚æ•°

```http
POST http://localhost:1880/api/v1/devices/{id}/value
Content-Type: application/json

{
  "value": 24
}
```

#### æ‰¹é‡æ›´æ–°è®¾å¤‡

```http
POST http://localhost:1880/api/v1/devices/batch
Content-Type: application/json

{
  "updates": [
    { "id": "light-main", "status": true },
    { "id": "ac", "value": 24 }
  ]
}
```

### ç”¨æˆ·è®¤è¯

#### ç”¨æˆ·æ³¨å†Œ

```http
POST http://localhost:1880/api/v1/auth/register
Content-Type: application/json

{
  "name": "å¼ ä¸‰",
  "faceImage": "base64_image_data..."
}
```

å“åº”:
```json
{
  "id": "user_001",
  "name": "å¼ ä¸‰",
  "avatarUrl": "http://...",
  "registeredAt": 1699200000000
}
```

#### äººè„¸è¯†åˆ«

```http
POST http://localhost:1880/api/v1/auth/recognize
Content-Type: application/json

{
  "faceImage": "base64_image_data..."
}
```

å“åº”:
```json
{
  "id": "user_001",
  "name": "å¼ ä¸‰",
  "avatarUrl": "http://...",
  "confidence": 0.95
}
```

### MQTT Topics

| Topic | ç”¨é€” |
|-------|------|
| `iot/room/devices` | å…¨å±€è®¾å¤‡çŠ¶æ€å¹¿æ’­ |
| `iot/room/devices/{device_id}` | å•è®¾å¤‡çŠ¶æ€æ›´æ–° |

---

## ğŸ”§ é…ç½®è¯´æ˜

### Node-REDé…ç½®

è®¿é—® [http://localhost:1880](http://localhost:1880) å¯¼å…¥æµç¨‹é…ç½®ï¼š

```bash
# å¯¼å…¥æ–‡ä»¶
nodered-data/flows_final.json
```

### ThingsBoardé…ç½®

è®¿é—® [http://localhost:8080](http://localhost:8080)

é»˜è®¤è´¦å·:
- ç”¨æˆ·å: `sysadmin@thingsboard.org`
- å¯†ç : `sysadmin`

### MQTTé…ç½®

é…ç½®æ–‡ä»¶: `mosquitto/config/mosquitto.conf`

```ini
listener 1883
listener 9001
protocol websockets
allow_anonymous true
persistence true
persistence_location /mosquitto/data/
```

---

## ğŸ³ DockeræœåŠ¡è¯´æ˜

### ThingsBoard

ä¼ä¸šçº§IoTå¹³å°ï¼Œæä¾›è®¾å¤‡ç®¡ç†ã€æ•°æ®å­˜å‚¨å’Œå¯è§†åŒ–åŠŸèƒ½ã€‚

```bash
# æŸ¥çœ‹æ—¥å¿—
docker logs my-tb-platform

# é‡å¯æœåŠ¡
docker-compose restart thingsboard
```

### Node-RED

å¯è§†åŒ–æµç¨‹ç¼–æ’å·¥å…·ï¼Œæä¾›REST APIå’Œè®¾å¤‡ç®¡ç†æ¥å£ã€‚

```bash
# æŸ¥çœ‹æ—¥å¿—
docker logs my-node-red

# å¤‡ä»½æµç¨‹
docker cp my-node-red:/data/flows.json ./backup/
```

### Mosquitto

MQTTæ¶ˆæ¯ä»£ç†ï¼Œè´Ÿè´£è®¾å¤‡çŠ¶æ€å®æ—¶é€šä¿¡ã€‚

```bash
# æŸ¥çœ‹æ—¥å¿—
docker logs my-mqtt-broker

# æµ‹è¯•è¿æ¥
mosquitto_sub -h localhost -p 1884 -t "iot/room/#"
```

---

## ğŸ“ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°è®¾å¤‡

1. åœ¨ `store.ts` ä¸­çš„ `devices` æ•°ç»„æ·»åŠ è®¾å¤‡å®šä¹‰
2. åœ¨ `components/Room.tsx` ä¸­æ·»åŠ è®¾å¤‡3Dæ¨¡å‹
3. æ›´æ–° `types.ts` ä¸­çš„ `DeviceType` æšä¸¾
4. åœ¨ Node-RED ä¸­åˆ›å»ºå¯¹åº”çš„è®¾å¤‡æ§åˆ¶æµç¨‹

### æ‰©å±•AIæŒ‡ä»¤

ç¼–è¾‘ `services/geminiService.ts`:

```typescript
const systemPrompt = `
ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½å®¶å±…åŠ©æ‰‹ã€‚è§£æç”¨æˆ·æŒ‡ä»¤ï¼Œè¿”å›JSONæ ¼å¼çš„è®¾å¤‡æ›´æ–°æ•°ç»„ã€‚
æ”¯æŒçš„æ“ä½œï¼šå¼€å¯ã€å…³é—­ã€è°ƒèŠ‚ã€è®¾ç½®ç­‰ã€‚
`;
```

### è‡ªå®šä¹‰3Dæ¨¡å‹

åœ¨ `components/Room.tsx` ä¸­ä½¿ç”¨ Three.js åˆ›å»ºè‡ªå®šä¹‰å‡ ä½•ä½“ï¼š

```typescript
<mesh position={[x, y, z]}>
  <boxGeometry args={[width, height, depth]} />
  <meshStandardMaterial color={color} />
</mesh>
```

---

## ğŸ› æ•…éšœæ’é™¤

### å‰ç«¯æ— æ³•è¿æ¥MQTT

**é—®é¢˜**: è®¾å¤‡çŠ¶æ€æ— æ³•å®æ—¶åŒæ­¥

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥MosquittoæœåŠ¡çŠ¶æ€
docker logs my-mqtt-broker

# ç¡®è®¤WebSocketç«¯å£9001å¼€æ”¾
netstat -an | grep 9001

# æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°MQTTè¿æ¥é”™è¯¯
```

### Node-RED APIè¿”å›404

**é—®é¢˜**: è®¾å¤‡æ§åˆ¶è¯·æ±‚å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```bash
# ç¡®è®¤Node-REDæµç¨‹å·²å¯¼å…¥
docker exec my-node-red cat /data/flows.json

# æ£€æŸ¥APIç«¯ç‚¹é…ç½®
# è®¿é—® http://localhost:1880 æŸ¥çœ‹æµç¨‹å›¾
```

### äººè„¸è¯†åˆ«å¤±è´¥

**é—®é¢˜**: æ³¨å†Œ/è¯†åˆ«è¿”å›é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
```bash
# ç¡®è®¤PythonæœåŠ¡å·²å¯åŠ¨
docker ps | grep python-backend

# æ£€æŸ¥DeepFaceä¾èµ–
docker exec my-python-backend pip list | grep deepface
```

### 3Dåœºæ™¯é»‘å±

**é—®é¢˜**: 3Dæ¸²æŸ“åŒºåŸŸæ˜¾ç¤ºé»‘è‰²

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥æµè§ˆå™¨WebGLæ”¯æŒ
- ç¡®è®¤Three.jsèµ„æºåŠ è½½å®Œæˆ
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

### å¼€å‘æµç¨‹

1. Forkæœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯Pull Request

### ä»£ç è§„èŒƒ

- ä½¿ç”¨TypeScriptç±»å‹æ³¨è§£
- éµå¾ªESLintè§„åˆ™
- ç¼–å†™æ¸…æ™°çš„æ³¨é‡Š
- æäº¤å‰è¿è¡Œ `npm run build` ç¡®ä¿æ— é”™è¯¯

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

## ğŸ‘¥ è”ç³»æ–¹å¼

- é¡¹ç›®ä¸»é¡µ: [GitHub Repository]
- é—®é¢˜åé¦ˆ: [GitHub Issues]
- æŠ€æœ¯è®¨è®º: [Discussions]

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®çš„æ”¯æŒï¼š

- [React](https://react.dev/) - UIæ¡†æ¶
- [Three.js](https://threejs.org/) - 3Då¼•æ“
- [Node-RED](https://nodered.org/) - å¯è§†åŒ–ç¼–ç¨‹
- [ThingsBoard](https://thingsboard.io/) - IoTå¹³å°
- [Google Gemini AI](https://aistudio.google.com/) - AIæœåŠ¡
- [DeepFace](https://github.com/serengil/deepface) - äººè„¸è¯†åˆ«
- [MediaPipe](https://google.github.io/mediapipe/) - æ‰‹åŠ¿è¯†åˆ«

---

<div align="center">

**å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸€ä¸ª â­ï¸ Starï¼**

Made with â¤ï¸ by 3dRoomV2 Team

</div>
